<!DOCTYPE html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>

    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>

            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map {
                    position: absolute;
                    width: 100.0%;
                    height: 75.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            </style>
            <style>
                #text {
                    position: absolute;
                    width: 100.0%;
                    height: 25.0%;
                    left: 0.0%;
                    top: 75.0%;
                }
            </style>

    <script src="leaflet-side-by-side.js"></script>

</head>
<body>

            <div class="folium-map" id="map" ></div>

            <div class="text" id="text" >
              <p><strong>Disclaimer</strong></p>
              <strong>Please not that this is not a real snow detection tool - it simply highlights pixels above an arbitrary threshold.</strong>
              <p>This is a very simple tool showing satellite data and potential snow cover side-to side, which can help in route planning. In the left-hand panel, the latest Sentinel 2 RGB data are displayed, in the right pixels with potential snow cover are highlighted in red. If no data is available for your region of interest, try toggling the layers to an older image. As the map simply highlights very bright pixels, clouds, buildings or other bright pixels can be &quot;detected&quot; as snow; and snow with a lot of debris on top of it might go undetected. Actual snow cover might differ significantly from what is predicted, or the data might be outdated. So, be careful and take none of these results for granted. Always use common sense, don&#39;t take any of these predictions as sole tour planning tool.</p>

              <p>The map is projected in EPSG3857 (Pseudo-Mercator) to keep computing time to a minimum.</p>

              <p><span style="font-size:9px">For completeness: the information contained in this website is for general information purposes only. No representations or warranties of any kind, express or implied, about the completeness, accuracy, reliability, suitability or availability with respect to the website or the information, products, services, or related graphics contained on the website for any purpose. Any reliance you place on such information is therefore strictly at your own risk. In no event we will be liable for any loss or damage including without limitation, indirect or consequential loss or damage, or any loss or damage whatsoever arising from loss of data or profits arising out of, or in connection with, the use of this website.</span></p>

</body>
<script>
            var map = L.map(
                "map",
                {
                    center: [46.75, 8.5],
                    crs: L.CRS.EPSG3857,
                    zoom: 11,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            var swiss_topo_tiles = L.tileLayer(
                "https://wmts.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg",
                {"attribution":  "Map Data \u0026copy; \u003ca href=\"https://www.swisstopo.admin.ch/en/home.html\"\u003eFederal Office of Topography swisstopo\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map);

            var s2_tiles_latest = L.tileLayer(
              "https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/d84e8d9a353056f43acdff7a8363e412-f8d0b4e3f29cc1c24b2459306c8ac886/tiles/{z}/{x}/{y}",
                {"attribution": "\u0026copy; \u003ca href=\"https://earthengine.google.com/\"\u003eGoogle Earth Engine\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map);

            var snow_cover_latest = L.tileLayer(
              "https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/a9e8c13b394ecb6ce37d6cd833f7bbf1-f2159e83313f38044ea7e2e99addca78/tiles/{z}/{x}/{y}",
                {"attribution": "\u0026copy; \u003ca href=\"https://earthengine.google.com/\"\u003eGoogle Earth Engine\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map);

            var s2_tiles_second = L.tileLayer(
              "https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/523b0d1efe0eeff95838c6993e53d791-f4186adc41ecace2367207ebf47cf557/tiles/{z}/{x}/{y}",
                {"attribution": "\u0026copy; \u003ca href=\"https://earthengine.google.com/\"\u003eGoogle Earth Engine\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            )//.addTo(map);

            var snow_cover_second = L.tileLayer(
              "https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/e901524ccb7ae5cc7e46a6936793322e-968f37c6fddce7dd58aa7d3b73cbdf02/tiles/{z}/{x}/{y}",
                {"attribution": "\u0026copy; \u003ca href=\"https://earthengine.google.com/\"\u003eGoogle Earth Engine\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            )//.addTo(map);

            // const provider = new window.GeoSearch.OpenStreetMapProvider();
            // const search = new GeoSearch.GeoSearchControl({
            //     provider: provider,
            //     style: 'bar',
            //     updateMap: true,
            //     autoClose: true,
            // }); // Include the search box with usefull params. Autoclose and updateMap in my case. Provider is a compulsory parameter.



            var layers = {
                base_layers : {
                    "Swisstopo" : swiss_topo_tiles,
                },
                overlays :  {
                  "Sentinel 2022-05-11" : s2_tiles_latest,
                  "Sentinel 2022-05-09" : s2_tiles_second,
                  "Potential snow 2022-05-11" : snow_cover_latest,
                  "Potential snow 2022-05-09" : snow_cover_second,
                },
            };
            L.control.layers(
                layers.base_layers,
                layers.overlays,
                {"autoZIndex": true, "collapsed": false, "position": "topright"}
            ).addTo(map);

            L.control.sideBySide([s2_tiles_latest, s2_tiles_second], [snow_cover_latest, snow_cover_second]).addTo(map);

</script>
