<!DOCTYPE html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>

    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>

            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

                <link rel="preconnect" href="https://fonts.googleapis.com">
                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">            <style>
                #map {
                    position: absolute;
                    width: 100.0%;
                    height:93.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            </style>
            <style>
                #text {
                    font-family: 'Roboto', sans-serif;
                    position: absolute;
                    width: 90.0%;
                    height: 25.0%;
                    left: 5.0%;
                    top: 93.0%;
                }
            </style>


    <script src="leaflet-side-by-side.js"></script>

</head>
<body>

            <div class="folium-map" id="map" ></div>

            <div class="text" id="text" >
              <p style="text-align:justify"><strong>General info</strong></p>

              <p style="text-align:justify"><strong>Snow cover &#39;detection&#39;</strong></p>

              <p style="text-align:justify">This tool is aimed at trail runners and/or mountain bikers who want to go somewhere relatively high up in the mountains early in the seasons. This is a very simple tool showing satellite data and potential snow cover side-to side, which can help in route planning. On the left, the latest Sentinel 2 RGB (visible light) data are displayed, on the pixels with potential snow cover are highlighted in red. Nothing fancy is done; simply all pixels with a signal above a super arbitrary threshold are considered to be &#39;snow covered&#39;. A way better solution is built by <a href="https://www.exolabs.ch/" target="_blank">Exolabs</a>, who&#39;s snow cover layers are built using observational data and models, and supply snow depth too. Yet, for whoever wants to know whether there&#39;s&nbsp;<em>any</em>&nbsp;snow left on the planned route, this janky thing might come in useful :)</p>

              <p style="text-align:justify"><strong>No satellite imagery is available for my region of interest!</strong></p>

              <p style="text-align:justify">Most likely this means that you need to select another satellite signal: you can do this under the drop-down menu on the top-right. If you&#39;re unlucky and there were clouds on the moment the imagery was collected, clouds or blank pixels will be displayed.&nbsp;</p>

              <p style="text-align:justify"><strong>Disclaimer / small print</strong></p>

              <p style="text-align:justify">Please note that this is not a real snow detection tool - it simply highlights pixels above an arbitrary threshold. Hence, clouds, buildings or other bright pixels can be detected as snow; and snow covered by debris go undetected. Actual snow cover might differ significantly from what is predicted, and the data might be faulty or outdated. So, be careful and take none of these results for granted. Always use common sense, don&#39;t take any of these predictions as sole tour planning tool.</p>

              <p style="text-align:justify">I cannot take any responsibility nor can I be held liable for any information displayed on this page.&nbsp;Any reliance you place on the displayed information is therefore strictly at your own risk.</p>

              <p style="text-align:right"><u>Copyright (c) Johan van den Hoogen 2022 - released under MIT License</u></p>

<script>
            var map = L.map(
                "map",
                {
                    center: [46.75, 8.5],
                    crs: L.CRS.EPSG3857,
                    zoom: 11,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            var swiss_topo_tiles = L.tileLayer(
                "https://wmts.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg",
                {"attribution":  "Map Data \u0026copy; \u003ca href=\"https://www.swisstopo.admin.ch/en/home.html\"\u003eFederal Office of Topography swisstopo\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map);

            var s2_tiles_latest = L.tileLayer(
              "https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/d84e8d9a353056f43acdff7a8363e412-f8d0b4e3f29cc1c24b2459306c8ac886/tiles/{z}/{x}/{y}",
                {"attribution": "\u0026copy; \u003ca href=\"https://earthengine.google.com/\"\u003eGoogle Earth Engine\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map);

            var snow_cover_latest = L.tileLayer(
              "https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/716986381775404aa6ef7e615c354d02-0f3ab78a7d8cf8516e8fb3cfd711b912/tiles/{z}/{x}/{y}",
                {"attribution": "\u0026copy; \u003ca href=\"https://earthengine.google.com/\"\u003eGoogle Earth Engine\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map);

            var s2_tiles_second = L.tileLayer(
              "https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/523b0d1efe0eeff95838c6993e53d791-f4186adc41ecace2367207ebf47cf557/tiles/{z}/{x}/{y}",
                {"attribution": "\u0026copy; \u003ca href=\"https://earthengine.google.com/\"\u003eGoogle Earth Engine\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            )

            var snow_cover_second = L.tileLayer(
              "https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/0ac65977fb14fb072df7e1cbc2947c90-df1f634b74dfe42e8fe70fcede5dfd4c/tiles/{z}/{x}/{y}",
                {"attribution": "\u0026copy; \u003ca href=\"https://earthengine.google.com/\"\u003eGoogle Earth Engine\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            )

            var layers = {
                base_layers : {
                    "Swisstopo" : swiss_topo_tiles,
                },
                overlays :  {
                  "Satellite 2022-05-11" : s2_tiles_latest,
                  "Satellite 2022-05-09" : s2_tiles_second,
                  "Potential snow 2022-05-11" : snow_cover_latest,
                  "Potential snow 2022-05-09" : snow_cover_second,
                },
            };
            L.control.layers(
                layers.base_layers,
                layers.overlays,
                {"autoZIndex": true, "collapsed": true, "position": "topright"}
            ).addTo(map);

            L.control.sideBySide([s2_tiles_latest, s2_tiles_second], [snow_cover_latest, snow_cover_second]).addTo(map);

</script>
